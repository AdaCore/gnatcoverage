Compliance to guidance
======================
This section contains compliance matrix with the guidance contained in section 12.2 of DO-178B. 

**Note:** in the following, we always use the term "verification tool" to indicate the software level of the tool following the DO-178B terminology. In this context, this term is equivalent to TQL5 for DO-178C.

.. csv-table:: **Section 12.2**
   :delim: |
   :header: "Section", "Data", "Notes"

   12.2a|verification tool|see `Software Level`_
   12.2b|not applicable|verification tool
   12.2c |see  :qmref:`$(project)::Plans::Software Configuration Management Plan` and see :qmref:`$(project)::Plans::Software Quality Assurance Plan`
   12.2.1|not applicable| verification tool
   12.2.2| see "Tool Operational Requirement and Test cases document", see "Tests Results document", and `GNATcoverage Qualified Interface`_ |
   12.2.3a|to be provided by the applicant|See :qmref:`$(project)::Plans::Tool Qualification Plan::User_Activities`
   12.2.3b|CC2 see  :qmref:`$(project)::Plans::Software Configuration Management Plan`|verification tool
   12.2.3c|not applicable|verification tool
   12.2.3.1|not applicable|nonetheless we provide :qmref:`$(project)::Plans::Tool Qualification Plan` (this document)
   12.2.3.2a|see "Tool Operational Requirement and Test case document"|
   12.2.3.2b|see "GNAT Pro User's Guide" and "GNATcoverage User's Guide" and "GNATcoverage README" |
   12.2.3.2c|??? where is described the actual operational environment???|See :qmref:`$(project)::Plans::Tool Qualification Plan::Environment_Equivalence`
   12.2.3.2d|not applicable|verification tool
   12.2.4|to be provided by the applicant |see :qmref:`$(project)::Plans::Tool Qualification Plan::User_Activities`
   
Tool Overview
=============
GNATcoverage is a tool designed to assess the source level structural coverage achieved by a testing campaign on software. It operates without any instrumentation of the original program, on code generated by the same compiler as the one producing the executable deployed on the target hardware.

Detailed information on the tool capabilities and characteristics is available in the GNATcoverage User's Guide as well as in [AE09] an [ERTS10] papers.

Sought Certification Credit
===========================

GNATcoverage aims at automating the structural coverage assessment activities required by the Software Verification Process of DO-178B and described in section 6.4.4.2 and table A7, objectives 5, 6 and 7 depending on the software level.


Software Level
==============

For level C, GNATcoverage produces statement coverage data when using the option --level=stmt. 

For level B, GNATcoverage produces statement coverage data *and* decision coverage data when using option --level=stmt+decision.

For level A, GNATcoverage produces statement coverage data *and* decision coverage data *and* mcdc coverage data when using option --level=stmt+mcdc.

GNATcoverage qualified interface
================================

To obtain reports suitable for use as certification evidence, applicants shall use GNATcoverage as follows:

* Build the object code composing the application under test with the GNAT Pro toolchain identified in the Tool Operational Requirements obeying to the compilation options and coding standard rules documented in the Operational Environment section.

* Build the test code and test harness and link it with the relevant application objects if necessary to form one or several test executables. The test code does not need to be compiled with the switches described in the Operational Environment section, nor does it need to comply to the coding standard.

* Obtain as many execution trace files (<TRACE>) as needed by running the test  executables (<APP>) within the instrumented execution environment:

.. code-block:: text 
 
 xcov run --target=<TARGET> --level=<LVL> <APP> -o <TRACE>
 ...
 xcov run --target=<TARGET> --level=<LVL> <APP> -o <TRACE>

* Produce a single <REPORT> file (format documented in  the GNATcoverage User's Guide), consolidating the various coverage information associated with the various execution  traces of interest:

.. code-block:: text

 xcov coverage --annotate=report --level=<LVL> --scos=@<alis.list> @<traces.list> -o <REPORT>

where:

* <APP> is test executable
* <LVL> designates the coverage criteria to assess. See :qmref:`$(project)::Plans::Tool Qualification Plan::Tool_Overview` Software Level
* <REPORT> is the output file containing the GNATcoverage report
* <TARGET> identifies the target platform (as in the GNAT Pro toolchain prefixes, e.g.  powerpc-elf);
* <TRACE> is the output file containing the execution trace
* <alis.list> is a text file containing the list of GNAT Pro ALI file names associated with the units for which coverage is assessed
* <traces.list> is a text file containing the list of execution traces to operate on.
