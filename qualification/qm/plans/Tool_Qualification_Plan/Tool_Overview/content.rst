Compliance to guidance
======================
This section contains compliance matrices with the guidance contained in section 12.2 of DO-178B. 

**Note:** in the following, we always use the term "verification tool" to
indicate the software level of the tool following the DO-178B taxonomy. This
term is equivalent to TQL5 for DO-178C.

.. csv-table:: **Section 12.2**
   :delim: |
   :header: "Section", "Data", "Notes"

   12.2a|verification tool|see `Software Level`_
   12.2b|not applicable|verification tool
    12.2c (Software Configuration Management Recommendations)|Compliance matrix for table A-8 in :qmref:`/PLANS/Software_Configuration_Management_Recommendations`|Up to the applicant, see :qmref:`/PLANS/Tool_Qualification_Plan/User_Activities`
   12.2c (Software Quality Assurance Plan) | Compliance matrix for table A-9 in :qmref:`/PLANS/Software_Quality_Assurance_Plan`

Section **12.2.1** does not apply to verification tools.

.. csv-table:: **Section 12.2.2**
   :delim: |
   :header: "Section", "Data", "Notes"

   12.2.2 (Tool Operational Requirements)| Tool Operational Requirement document (*TOR.pdf*) and Software Tests Results report (*STR.pdf*)|
   12.2.2 (Normal operational conditions)| `GNATcoverage Qualified Interface`_ |

.. csv-table:: **Section 12.2.3**
   :delim: |
   :header: "Section", "Data", "Notes"

   12.2.3a|To be provided by the applicant|See :qmref:`/PLANS/Tool_Qualification_Plan/User_Activities`
   12.2.3b|CC2|GNATcoverage is qualified as a verification tool
   12.2.3c|Not applicable|GNATcoverage is qualified as a verification tool
   12.2.3.1|:qmref:`/PLANS/Tool_Qualification_Plan` (this document)|Not required for verification tools, but still provided in this document
   12.2.3.2a|Tool Operational Requirement document|
   12.2.3.2b|GNATcoverage User's Guide|
   12.2.3.2c|See :qmref:`/PLANS/Tool_Qualification_Plan/Environment_Equivalence`
   12.2.3.2d|Not applicable|GNATcoverage is qualified as a verification tool

The Tool Qualification Agreement (**section 12.2.4**) is to be provided by the applicant (see :qmref:`/PLANS/Tool_Qualification_Plan/User_Activities`)
   
   
Tool Overview
=============
GNATcoverage is a tool designed to assess the source level structural coverage achieved by a testing campaign on software. It operates without any instrumentation of the original program, on code generated by the same compiler as the one producing the executable deployed on the target hardware. Detailed information on the tool capabilities and characteristics is available in the GNATcoverage User's Guide as well as in [AE09] and [ERTS10] papers.

Sought Certification Credit
===========================

GNATcoverage aims at automating the structural coverage assessment activities required by the Software Verification Process of DO-178B and described in section 6.4.4.2 and table A7, objectives 5, 6 and 7 depending on the software level.


Software Level
==============

For level C, GNATcoverage produces statement coverage data when using the option --level=stmt. 

For level B, GNATcoverage produces statement coverage data *and* decision coverage data when using option --level=stmt+decision.

For level A, GNATcoverage produces statement coverage data *and* decision coverage data *and* mcdc coverage data when using option --level=stmt+mcdc.

GNATcoverage qualified interface
================================
To obtain reports suitable for use as certification evidence, applicants shall use GNATcoverage as follows:

* Build the application object code with the GNAT Pro toolchain identified in the Operational Environment section of TOR document, obeying the compilation options and coding standard rules documented there as well.

* Build the test code and test harness and link it with the relevant application objects if necessary to form one or several test executables. The test code does not need to be compiled with the switches described in the Operational Environment section, nor does it need to comply to the coding standard.

* Obtain as many execution trace files (<TRACE>) as needed by running the test executables (<APP>) within the instrumented execution environment, specifying the target architecture (<TARGET>) *and* the criterion level to be assessed (<LVL>) as well:

.. code-block:: text 
 
 gnatcov run --target=<TARGET> --level=<LVL> <APP> -o <TRACE>
 ...
 gnatcov run --target=<TARGET> --level=<LVL> <APP> -o <TRACE>

* Produce a single <REPORT> file (format documented in the GNATcoverage User's Guide), consolidating the coverage outcome for the list of execution traces stored in the <traces.list> file, and querying results for the list of source units designated in the <alis.list> file:

.. code-block:: text

 gnatcov coverage --annotate=report --level=<LVL> --scos=@<alis.list> @<traces.list> -o <REPORT>

In the sample commands above:

* <APP> is a test executable
* <LVL> designates the coverage criteria to assess. See :qmref:`/PLANS/Tool_Qualification_Plan/Tool_Overview` Software Level
* <REPORT> is the output file containing the GNATcoverage report
* <TARGET> identifies the target platform (as in the GNAT Pro toolchain prefixes, e.g.  powerpc-elf);
* <TRACE> is the output file containing the execution trace
* <alis.list> is a text file containing the list of GNAT Pro ALI file names associated with the units for which coverage is assessed
* <traces.list> is a text file containing the list of execution traces to operate on.
